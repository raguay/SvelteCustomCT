import{SvelteComponent as t,init as e,safe_not_equal as n,element as o,text as r,space as c,insert as a,append as s,set_data as i,detach as u,create_slot as l,listen as p,get_slot_changes as f,get_slot_context as d,subscribe as $,empty as h,group_outros as m,on_outro as v,check_outros as k,assign as y,exclude_internal_props as g,mount_component as w,get_spread_update as b,prevent_default as x}from"svelte/internal";import{writable as R}from"svelte/store";import{getContext as _,setContext as N,onDestroy as P,onMount as j,createEventDispatcher as E}from"svelte";var I=function(t){function e(e,n){var o="Unreachable '"+e+"', segment '"+n+"' is not defined";t.call(this,o),this.message=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);var O=function(t,e){var n=function(t,e){var n,o,r=-100,c=[];n=t.replace(/[-$.]/g,"\\$&").replace(/\(/g,"(?:").replace(/\)/g,")?").replace(/([:*]\w+)(?:<([^<>]+?)>)?/g,function(t,e,n){return c.push(e.substr(1)),":"===e.charAt()?(r+=100,"((?!#)"+(n||"[^/]+?")+")"):(o=!0,r+=500,"((?!#)"+(n||".+?")+")")});try{n=new RegExp("^"+n+"$")}catch(t){throw new TypeError("Invalid route expression, given '"+e+"'")}var a=t.includes("#")?.5:1,s=t.length*r*a;return{keys:c,regex:n,_depth:s,_isSplat:o}}(t,e),o=n.keys,r=n.regex,c=n._depth;return{_isSplat:n._isSplat,_depth:c,match:function(t){var e=t.match(r);if(e)return o.reduce(function(t,n,o){return t[n]="string"==typeof e[o+1]?decodeURIComponent(e[o+1]):null,t},{})}}};function S(t,e){return""+(e&&"/"!==e?e:"")+(t||"")}function T(t,e){var n=t.match(/<[^<>]*\/[^<>]*>/);if(n)throw new TypeError("RegExp cannot contain slashes, given '"+n+"'");var o="/"!==t?t.split("/"):[""],r=[];o.some(function(t,n){var c=r.concat(t).join("/")||null,a=o.slice(n+1).join("/")||null,s=e("/"+t,c,a?(t?"/"+t:"")+"/"+a:null);return r.push(t),s})}function C(t,e,n){for(var o=function(t,e,n){var o,r={},c=[];return T(t,function(a,s,i){var u;if(!e.keys)throw new I(t,a);if(e.keys.some(function(t){if(n.includes(t))return!1;var l=e[t].pattern,p=l.match,f=l._isSplat,d=p(f&&i||a);return!!d&&(Object.assign(r,d),e[t].route&&c.push(Object.assign({},e[t].info,{matches:a===s||f||!i,params:Object.assign({},r),route:e[t].route,path:f?i:s||a})),null===i&&!e[t].keys||("/"!==t&&n.push(t),o=f,e=e[t],u=!0,!0))}),!u&&!e.keys.some(function(t){return e[t].pattern.match(a)}))throw new I(t,a);return o||!u}),c}.bind(null,t,e),r=[];n>0;){n-=1;try{return o(r)}catch(t){if(n>0)return o(r);throw t}}}O.push=function(t,e,n,o){var r=e[t]||(e[t]={});return r.pattern||(r.pattern=new O(t,o),r.route=n||"/"),e.keys=e.keys||[],e.keys.includes(t)||(e.keys.push(t),O.sort(e)),r},O.sort=function(t){t.keys.sort(function(e,n){return t[e].pattern._depth-t[n].pattern._depth})};const A={};function U(t){if(!t||"string"!=typeof t)throw Error(`svero expects navigateTo() to have a string parameter. The parameter provided was: ${t} of type ${typeof t} instead.`);if("/"!==t[0]&&"#"!==t[0])throw Error(`svero expects navigateTo() param to start with slash or hash, e.g. "/${t}" or "#${t}" instead of "${t}".`);history.pushState&&window.dispatchEvent?(history.pushState({},"",t),window.dispatchEvent(new Event("popstate"))):window.location.href=t}function M(t){var e,n,l,p,f,d,$;return{c(){e=o("fieldset"),n=o("legend"),l=r("Router failure: "),p=r(t.path),f=c(),d=o("pre"),$=r(t.failure)},m(t,o){a(t,e,o),s(e,n),s(n,l),s(n,p),s(e,f),s(e,d),s(d,$)},p(t,e){t.path&&i(p,e.path),t.failure&&i($,e.failure)},d(t){t&&u(e)}}}function q(t){var e,n,o,r=t.failure&&!t.nofallback&&M(t);const s=t.$$slots.default,i=l(s,t,null);return{c(){r&&r.c(),e=c(),i&&i.c(),o=p(window,"popstate",t.handlePopState)},l(t){i&&i.l(t)},m(t,o){r&&r.m(t,o),a(t,e,o),i&&i.m(t,o),n=!0},p(t,n){n.failure&&!n.nofallback?r?r.p(t,n):((r=M(n)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),i&&i.p&&t.$$scope&&i.p(f(s,n,t,null),d(s,n,null))},i(t){n||(i&&i.i&&i.i(t),n=!0)},o(t){i&&i.o&&i.o(t),n=!1},d(t){r&&r.d(t),t&&u(e),i&&i.d(t),o()}}}const z=new function(){var t={},e=[];return{mount:function(t,n){"/"!==t&&e.push(t),n(),e.pop()},find:function(e,n){return C(e,t,!0===n?2:n||1)},add:function(n,o){return function(t,e,n,o){var r=S(t,n),c=e;return T(r,function(t,e){c=O.push(t,c,e,r),"/"!==t&&(c.info=c.info||Object.assign({},o))}),c.info=c.info||Object.assign({},o),r}(n,t,e.join(""),o)},rm:function(n){return function(t,e,n){var o=S(t,n),r=e,c=null,a=null;if(T(o,function(n){if(!r)return c=null,!0;if(a=n,!(c="/"===n?e["/"]:r).keys)throw new I(t,n);r=r[n]}),!c||!a)throw new I(t,a);delete c[a],"/"===a&&(delete c.info,delete c.route),-1!==c.keys.indexOf(a)&&(c.keys.splice(c.keys.indexOf(a),1),O.sort(c))}(n,t,e.join(""))}}};function B(t){return"/#*"===t||"#*"===t?"#*_":"/*"===t||"*"===t?"/*_":t}function D(t,e,n){let o,r,c,a,s,{path:i="/",nofallback:u=null}=e;const l=R({});$(t,l,t=>{n("$routeInfo",o=t)});const p=_(A),f=p?p.basePath:R(i);function d(t){const e=t.reduce((t,e)=>(t[e.key]=Object.assign(t[e.key]||{},e.params),t),{});let n,r={};t.some(t=>{if("boolean"==typeof t.condition||"function"==typeof t.condition){if(!1===("function"==typeof t.condition?t.condition():t.condition)&&t.redirect)return U(t.redirect),n=!0,!0}if(t.key&&!r[t.key]){if(t.exact&&!t.matches)return!1;r[t.key]={...t,params:e[t.key]}}return!1}),n||(o=r,l.set(o))}function h(t,e){o[s]={failure:t,params:{_:e.substr(1)||void 0}},l.set(o)}function m(){const t=`/${location.href.split("/").slice(3).join("/")}`.replace(/\?[^#]*/,"").replace(/(?!^)\/#/,"#").replace("/#","#").replace(/\/$/,"");try{const e=function(t){const e=t.split("#")[0].split("/"),n=[],o=[];return e.forEach(e=>{const r=n.concat(`/${e}`).join("");e&&n.push(`/${e}`);try{const e=z.find(r);d(e),o.push(...e)}catch(e){h(e,t)}}),o}(t);if(t.includes("#")){const n=z.find(t),o={};d(e.concat(n).reduce((t,e)=>(void 0===o[e.key]&&(o[e.key]=t.length),t[o[e.key]]=e,t),[]))}}catch(e){if(!s)return void n("failure",a=e);h(e,t)}}function v(){clearTimeout(c),c=setTimeout(m,100)}$(t,f,t=>{n("$basePath",r=t)}),N(A,{basePath:f,routeInfo:l,assignRoute:function(t,e,n){t=t||Math.random().toString(36).substr(2);const o=r!==i&&"/"!==r?`${r}${i}`:i,c={key:t,...n};let a;return z.mount(o,()=>{a=z.add(B(e),c),s=c.fallback&&t||s}),v(),[t,a]},unassignRoute:function(t){z.rm(B(t)),v()}});let{$$slots:k={},$$scope:y}=e;return t.$set=t=>{"path"in t&&n("path",i=t.path),"nofallback"in t&&n("nofallback",u=t.nofallback),"$$scope"in t&&n("$$scope",y=t.$$scope)},{failure:a,path:i,nofallback:u,routeInfo:l,basePath:f,handlePopState:m,$$slots:k,$$scope:y}}class F extends t{constructor(t){super(),e(this,t,D,q,n,["path","nofallback"])}}const G=({activeRouter:t,activeProps:e})=>({router:t,props:e}),H=({activeRouter:t,activeProps:e})=>({router:t,props:e});function J(t){var e,n,o,r,c=[L,K],s=[];function i(t){return t.component?0:1}return e=i(t),n=s[e]=c[e](t),{c(){n.c(),o=h()},m(t,n){s[e].m(t,n),a(t,o,n),r=!0},p(t,r){var a=e;(e=i(r))===a?s[e].p(t,r):(m(),v(()=>{s[a].d(1),s[a]=null}),n.o(1),k(),(n=s[e])||(n=s[e]=c[e](r)).c(),n.i(1),n.m(o.parentNode,o))},i(t){r||(n&&n.i(),r=!0)},o(t){n&&n.o(),r=!1},d(t){s[e].d(t),t&&u(o)}}}function K(t){var e;const n=t.$$slots.default,o=l(n,t,H);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,n){o&&o.m(t,n),e=!0},p(t,e){o&&o.p&&(t.$$scope||t.activeRouter||t.activeProps)&&o.p(f(n,e,t,G),d(n,e,H))},i(t){e||(o&&o.i&&o.i(t),e=!0)},o(t){o&&o.o&&o.o(t),e=!1},d(t){o&&o.d(t)}}}function L(t){var e,n,o=[{router:t.activeRouter},t.activeProps],r=t.component;function c(t){let e={};for(var n=0;n<o.length;n+=1)e=y(e,o[n]);return{props:e}}if(r)var s=new r(c());return{c(){s&&s.$$.fragment.c(),e=h()},m(t,o){s&&w(s,t,o),a(t,e,o),n=!0},p(t,n){var a=t.activeRouter||t.activeProps?b(o,[t.activeRouter&&{router:n.activeRouter},t.activeProps&&n.activeProps]):{};if(r!==(r=n.component)){if(s){m();const t=s;v(()=>{t.$destroy()}),t.$$.fragment.o(1),k()}r?((s=new r(c())).$$.fragment.c(),s.$$.fragment.i(1),w(s,e.parentNode,e)):s=null}else r&&s.$set(a)},i(t){n||(s&&s.$$.fragment.i(t),n=!0)},o(t){s&&s.$$.fragment.o(t),n=!1},d(t){t&&u(e),s&&s.$destroy(t)}}}function Q(t){var e,n,o=t.activeRouter&&J(t);return{c(){o&&o.c(),e=h()},m(t,r){o&&o.m(t,r),a(t,e,r),n=!0},p(t,n){n.activeRouter?o?(o.p(t,n),o.i(1)):((o=J(n)).c(),o.i(1),o.m(e.parentNode,e)):o&&(m(),v(()=>{o.d(1),o=null}),o.o(1),k())},i(t){n||(o&&o.i(),n=!0)},o(t){o&&o.o(),n=!1},d(t){o&&o.d(t),t&&u(e)}}}function V(t,e,n){let o,{key:r=null,path:c="",props:a=null,exact:s,fallback:i,component:u,condition:l,redirect:p}=e;const{assignRoute:f,unassignRoute:d,routeInfo:h}=_(A);$(t,h,t=>{n("$routeInfo",o=t)});let m,v=null,k={};[r,m]=f(r,c,{condition:l,redirect:p,fallback:i,exact:s}),n("key",r),P(()=>{d(m)});let{$$slots:w={},$$scope:b}=e;return t.$set=t=>{n("$$props",e=y(y({},e),t)),"key"in e&&n("key",r=e.key),"path"in e&&n("path",c=e.path),"props"in e&&n("props",a=e.props),"exact"in e&&n("exact",s=e.exact),"fallback"in e&&n("fallback",i=e.fallback),"component"in e&&n("component",u=e.component),"condition"in e&&n("condition",l=e.condition),"redirect"in e&&n("redirect",p=e.redirect),"$$scope"in t&&n("$$scope",b=t.$$scope)},t.$$.update=(t={$routeInfo:1,key:1,$$props:1})=>{(t.$routeInfo||t.key)&&(n("activeRouter",v=o[r]),n("activeProps",k=function(t,e){const{props:n,...o}=t;return e.forEach(t=>{delete o[t]}),{...n,...o}}(e,arguments[0].$$.props)))},{key:r,path:c,props:a,exact:s,fallback:i,component:u,condition:l,redirect:p,routeInfo:h,activeRouter:v,activeProps:k,$$props:e=g(e),$$slots:w,$$scope:b}}class W extends t{constructor(t){super(),e(this,t,V,Q,n,["key","path","props","exact","fallback","component","condition","redirect"])}}function X(t){var e,n,r;const c=t.$$slots.default,s=l(c,t,null);return{c(){e=o("a"),s&&s.c(),e.href=t.href,e.className=t.className,r=p(e,"click",x(t.onClick))},l(t){s&&s.l(a_nodes)},m(t,o){a(t,e,o),s&&s.m(e,null),n=!0},p(t,o){s&&s.p&&t.$$scope&&s.p(f(c,o,t,null),d(c,o,null)),n&&!t.href||(e.href=o.href),n&&!t.className||(e.className=o.className)},i(t){n||(s&&s.i&&s.i(t),n=!0)},o(t){s&&s.o&&s.o(t),n=!1},d(t){t&&u(e),s&&s.d(t),r()}}}function Y(t,e,n){let{class:o="",href:r="/",className:c="",title:a=""}=e;j(()=>{n("className",c=c||o)});const s=E();let{$$slots:i={},$$scope:u}=e;return t.$set=t=>{"class"in t&&n("cssClass",o=t.class),"href"in t&&n("href",r=t.href),"className"in t&&n("className",c=t.className),"title"in t&&n("title",a=t.title),"$$scope"in t&&n("$$scope",u=t.$$scope)},{cssClass:o,href:r,className:c,title:a,onClick:function(t){let e=r;"/"!==e.charAt()&&(e=window.location.pathname+e),U(e),s("click",t)},$$slots:i,$$scope:u}}class Z extends t{constructor(t){super(),e(this,t,Y,X,n,["class","href","className","title"])}}export{Z as Link,W as Route,F as Router,U as navigateTo};
