!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("svelte/internal"),require("svelte/store"),require("svelte")):"function"==typeof define&&define.amd?define(["exports","svelte/internal","svelte/store","svelte"],t):t((e=e||self).svero={},e.internal,e.store,e.svelte)}(this,function(e,t,n,o){"use strict";var r=function(e){function t(t,n){var o="Unreachable '"+t+"', segment '"+n+"' is not defined";e.call(this,o),this.message=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);var s=function(e,t){var n=function(e,t){var n,o,r=-100,s=[];n=e.replace(/[-$.]/g,"\\$&").replace(/\(/g,"(?:").replace(/\)/g,")?").replace(/([:*]\w+)(?:<([^<>]+?)>)?/g,function(e,t,n){return s.push(t.substr(1)),":"===t.charAt()?(r+=100,"((?!#)"+(n||"[^/]+?")+")"):(o=!0,r+=500,"((?!#)"+(n||".+?")+")")});try{n=new RegExp("^"+n+"$")}catch(e){throw new TypeError("Invalid route expression, given '"+t+"'")}var a=e.includes("#")?.5:1,c=e.length*r*a;return{keys:s,regex:n,_depth:c,_isSplat:o}}(e,t),o=n.keys,r=n.regex,s=n._depth;return{_isSplat:n._isSplat,_depth:s,match:function(e){var t=e.match(r);if(t)return o.reduce(function(e,n,o){return e[n]="string"==typeof t[o+1]?decodeURIComponent(t[o+1]):null,e},{})}}};function a(e,t){return""+(t&&"/"!==t?t:"")+(e||"")}function c(e,t){var n=e.match(/<[^<>]*\/[^<>]*>/);if(n)throw new TypeError("RegExp cannot contain slashes, given '"+n+"'");var o="/"!==e?e.split("/"):[""],r=[];o.some(function(e,n){var s=r.concat(e).join("/")||null,a=o.slice(n+1).join("/")||null,c=t("/"+e,s,a?(e?"/"+e:"")+"/"+a:null);return r.push(e),c})}function i(e,t,n){for(var o=function(e,t,n){var o,s={},a=[];return c(e,function(c,i,u){var l;if(!t.keys)throw new r(e,c);if(t.keys.some(function(e){if(n.includes(e))return!1;var r=t[e].pattern,p=r.match,f=r._isSplat,d=p(f&&u||c);return!!d&&(Object.assign(s,d),t[e].route&&a.push(Object.assign({},t[e].info,{matches:c===i||f||!u,params:Object.assign({},s),route:t[e].route,path:f?u:i||c})),null===u&&!t[e].keys||("/"!==e&&n.push(e),o=f,t=t[e],l=!0,!0))}),!l&&!t.keys.some(function(e){return t[e].pattern.match(c)}))throw new r(e,c);return o||!l}),a}.bind(null,e,t),s=[];n>0;){n-=1;try{return o(s)}catch(e){if(n>0)return o(s);throw e}}}s.push=function(e,t,n,o){var r=t[e]||(t[e]={});return r.pattern||(r.pattern=new s(e,o),r.route=n||"/"),t.keys=t.keys||[],t.keys.includes(e)||(t.keys.push(e),s.sort(t)),r},s.sort=function(e){e.keys.sort(function(t,n){return e[t].pattern._depth-e[n].pattern._depth})};const u={};function l(e){if(!e||"string"!=typeof e)throw Error(`svero expects navigateTo() to have a string parameter. The parameter provided was: ${e} of type ${typeof e} instead.`);if("/"!==e[0]&&"#"!==e[0])throw Error(`svero expects navigateTo() param to start with slash or hash, e.g. "/${e}" or "#${e}" instead of "${e}".`);history.pushState&&window.dispatchEvent?(history.pushState({},"",e),window.dispatchEvent(new Event("popstate"))):window.location.href=e}function p(e){var n,o,r,s,a,c,i;return{c(){n=t.element("fieldset"),o=t.element("legend"),r=t.text("Router failure: "),s=t.text(e.path),a=t.space(),c=t.element("pre"),i=t.text(e.failure)},m(e,u){t.insert(e,n,u),t.append(n,o),t.append(o,r),t.append(o,s),t.append(n,a),t.append(n,c),t.append(c,i)},p(e,n){e.path&&t.set_data(s,n.path),e.failure&&t.set_data(i,n.failure)},d(e){e&&t.detach(n)}}}function f(e){var n,o,r,s=e.failure&&!e.nofallback&&p(e);const a=e.$$slots.default,c=t.create_slot(a,e,null);return{c(){s&&s.c(),n=t.space(),c&&c.c(),r=t.listen(window,"popstate",e.handlePopState)},l(e){c&&c.l(e)},m(e,r){s&&s.m(e,r),t.insert(e,n,r),c&&c.m(e,r),o=!0},p(e,o){o.failure&&!o.nofallback?s?s.p(e,o):((s=p(o)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),c&&c.p&&e.$$scope&&c.p(t.get_slot_changes(a,o,e,null),t.get_slot_context(a,o,null))},i(e){o||(c&&c.i&&c.i(e),o=!0)},o(e){c&&c.o&&c.o(e),o=!1},d(e){s&&s.d(e),e&&t.detach(n),c&&c.d(e),r()}}}const d=new function(){var e={},t=[];return{mount:function(e,n){"/"!==e&&t.push(e),n(),t.pop()},find:function(t,n){return i(t,e,!0===n?2:n||1)},add:function(n,o){return function(e,t,n,o){var r=a(e,n),i=t;return c(r,function(e,t){i=s.push(e,i,t,r),"/"!==e&&(i.info=i.info||Object.assign({},o))}),i.info=i.info||Object.assign({},o),r}(n,e,t.join(""),o)},rm:function(n){return function(e,t,n){var o=a(e,n),i=t,u=null,l=null;if(c(o,function(n){if(!i)return u=null,!0;if(l=n,!(u="/"===n?t["/"]:i).keys)throw new r(e,n);i=i[n]}),!u||!l)throw new r(e,l);delete u[l],"/"===l&&(delete u.info,delete u.route),-1!==u.keys.indexOf(l)&&(u.keys.splice(u.keys.indexOf(l),1),s.sort(u))}(n,e,t.join(""))}}};function h(e){return"/#*"===e||"#*"===e?"#*_":"/*"===e||"*"===e?"/*_":e}function $(e,r,s){let a,c,i,p,f,{path:$="/",nofallback:m=null}=r;const v=n.writable({});t.subscribe(e,v,e=>{s("$routeInfo",a=e)});const y=o.getContext(u),g=y?y.basePath:n.writable($);function k(e){const t=e.reduce((e,t)=>(e[t.key]=Object.assign(e[t.key]||{},t.params),e),{});let n,o={};e.some(e=>{if("boolean"==typeof e.condition||"function"==typeof e.condition){if(!1===("function"==typeof e.condition?e.condition():e.condition)&&e.redirect)return l(e.redirect),n=!0,!0}if(e.key&&!o[e.key]){if(e.exact&&!e.matches)return!1;o[e.key]={...e,params:t[e.key]}}return!1}),n||(a=o,v.set(a))}function _(e,t){a[f]={failure:e,params:{_:t.substr(1)||void 0}},v.set(a)}function b(){const e=`/${location.href.split("/").slice(3).join("/")}`.replace(/\?[^#]*/,"").replace(/(?!^)\/#/,"#").replace("/#","#").replace(/\/$/,"");try{const t=function(e){const t=e.split("#")[0].split("/"),n=[],o=[];return t.forEach(t=>{const r=n.concat(`/${t}`).join("");t&&n.push(`/${t}`);try{const t=d.find(r);k(t),o.push(...t)}catch(t){_(t,e)}}),o}(e);if(e.includes("#")){const n=d.find(e),o={};k(t.concat(n).reduce((e,t)=>(void 0===o[t.key]&&(o[t.key]=e.length),e[o[t.key]]=t,e),[]))}}catch(t){if(!f)return void s("failure",p=t);_(t,e)}}function w(){clearTimeout(i),i=setTimeout(b,100)}t.subscribe(e,g,e=>{s("$basePath",c=e)}),o.setContext(u,{basePath:g,routeInfo:v,assignRoute:function(e,t,n){e=e||Math.random().toString(36).substr(2);const o=c!==$&&"/"!==c?`${c}${$}`:$,r={key:e,...n};let s;return d.mount(o,()=>{s=d.add(h(t),r),f=r.fallback&&e||f}),w(),[e,s]},unassignRoute:function(e){d.rm(h(e)),w()}});let{$$slots:x={},$$scope:R}=r;return e.$set=e=>{"path"in e&&s("path",$=e.path),"nofallback"in e&&s("nofallback",m=e.nofallback),"$$scope"in e&&s("$$scope",R=e.$$scope)},{failure:p,path:$,nofallback:m,routeInfo:v,basePath:g,handlePopState:b,$$slots:x,$$scope:R}}const m=({activeRouter:e,activeProps:t})=>({router:e,props:t}),v=({activeRouter:e,activeProps:t})=>({router:e,props:t});function y(e){var n,o,r,s,a=[k,g],c=[];function i(e){return e.component?0:1}return n=i(e),o=c[n]=a[n](e),{c(){o.c(),r=t.empty()},m(e,o){c[n].m(e,o),t.insert(e,r,o),s=!0},p(e,s){var u=n;(n=i(s))===u?c[n].p(e,s):(t.group_outros(),t.on_outro(()=>{c[u].d(1),c[u]=null}),o.o(1),t.check_outros(),(o=c[n])||(o=c[n]=a[n](s)).c(),o.i(1),o.m(r.parentNode,r))},i(e){s||(o&&o.i(),s=!0)},o(e){o&&o.o(),s=!1},d(e){c[n].d(e),e&&t.detach(r)}}}function g(e){var n;const o=e.$$slots.default,r=t.create_slot(o,e,v);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,t){r&&r.m(e,t),n=!0},p(e,n){r&&r.p&&(e.$$scope||e.activeRouter||e.activeProps)&&r.p(t.get_slot_changes(o,n,e,m),t.get_slot_context(o,n,v))},i(e){n||(r&&r.i&&r.i(e),n=!0)},o(e){r&&r.o&&r.o(e),n=!1},d(e){r&&r.d(e)}}}function k(e){var n,o,r=[{router:e.activeRouter},e.activeProps],s=e.component;function a(e){let n={};for(var o=0;o<r.length;o+=1)n=t.assign(n,r[o]);return{props:n}}if(s)var c=new s(a());return{c(){c&&c.$$.fragment.c(),n=t.empty()},m(e,r){c&&t.mount_component(c,e,r),t.insert(e,n,r),o=!0},p(e,o){var i=e.activeRouter||e.activeProps?t.get_spread_update(r,[e.activeRouter&&{router:o.activeRouter},e.activeProps&&o.activeProps]):{};if(s!==(s=o.component)){if(c){t.group_outros();const e=c;t.on_outro(()=>{e.$destroy()}),e.$$.fragment.o(1),t.check_outros()}s?((c=new s(a())).$$.fragment.c(),c.$$.fragment.i(1),t.mount_component(c,n.parentNode,n)):c=null}else s&&c.$set(i)},i(e){o||(c&&c.$$.fragment.i(e),o=!0)},o(e){c&&c.$$.fragment.o(e),o=!1},d(e){e&&t.detach(n),c&&c.$destroy(e)}}}function _(e){var n,o,r=e.activeRouter&&y(e);return{c(){r&&r.c(),n=t.empty()},m(e,s){r&&r.m(e,s),t.insert(e,n,s),o=!0},p(e,o){o.activeRouter?r?(r.p(e,o),r.i(1)):((r=y(o)).c(),r.i(1),r.m(n.parentNode,n)):r&&(t.group_outros(),t.on_outro(()=>{r.d(1),r=null}),r.o(1),t.check_outros())},i(e){o||(r&&r.i(),o=!0)},o(e){r&&r.o(),o=!1},d(e){r&&r.d(e),e&&t.detach(n)}}}function b(e,n,r){let s,{key:a=null,path:c="",props:i=null,exact:l,fallback:p,component:f,condition:d,redirect:h}=n;const{assignRoute:$,unassignRoute:m,routeInfo:v}=o.getContext(u);t.subscribe(e,v,e=>{r("$routeInfo",s=e)});let y,g=null,k={};[a,y]=$(a,c,{condition:d,redirect:h,fallback:p,exact:l}),r("key",a),o.onDestroy(()=>{m(y)});let{$$slots:_={},$$scope:b}=n;return e.$set=e=>{r("$$props",n=t.assign(t.assign({},n),e)),"key"in n&&r("key",a=n.key),"path"in n&&r("path",c=n.path),"props"in n&&r("props",i=n.props),"exact"in n&&r("exact",l=n.exact),"fallback"in n&&r("fallback",p=n.fallback),"component"in n&&r("component",f=n.component),"condition"in n&&r("condition",d=n.condition),"redirect"in n&&r("redirect",h=n.redirect),"$$scope"in e&&r("$$scope",b=e.$$scope)},e.$$.update=(e={$routeInfo:1,key:1,$$props:1})=>{(e.$routeInfo||e.key)&&(r("activeRouter",g=s[a]),r("activeProps",k=function(e,t){const{props:n,...o}=e;return t.forEach(e=>{delete o[e]}),{...n,...o}}(n,arguments[0].$$.props)))},{key:a,path:c,props:i,exact:l,fallback:p,component:f,condition:d,redirect:h,routeInfo:v,activeRouter:g,activeProps:k,$$props:n=t.exclude_internal_props(n),$$slots:_,$$scope:b}}function w(e){var n,o,r;const s=e.$$slots.default,a=t.create_slot(s,e,null);return{c(){n=t.element("a"),a&&a.c(),n.href=e.href,n.className=e.className,r=t.listen(n,"click",t.prevent_default(e.onClick))},l(e){a&&a.l(a_nodes)},m(e,r){t.insert(e,n,r),a&&a.m(n,null),o=!0},p(e,r){a&&a.p&&e.$$scope&&a.p(t.get_slot_changes(s,r,e,null),t.get_slot_context(s,r,null)),o&&!e.href||(n.href=r.href),o&&!e.className||(n.className=r.className)},i(e){o||(a&&a.i&&a.i(e),o=!0)},o(e){a&&a.o&&a.o(e),o=!1},d(e){e&&t.detach(n),a&&a.d(e),r()}}}function x(e,t,n){let{class:r="",href:s="/",className:a="",title:c=""}=t;o.onMount(()=>{n("className",a=a||r)});const i=o.createEventDispatcher();let{$$slots:u={},$$scope:p}=t;return e.$set=e=>{"class"in e&&n("cssClass",r=e.class),"href"in e&&n("href",s=e.href),"className"in e&&n("className",a=e.className),"title"in e&&n("title",c=e.title),"$$scope"in e&&n("$$scope",p=e.$$scope)},{cssClass:r,href:s,className:a,title:c,onClick:function(e){let t=s;"/"!==t.charAt()&&(t=window.location.pathname+t),l(t),i("click",e)},$$slots:u,$$scope:p}}e.Link=class extends t.SvelteComponent{constructor(e){super(),t.init(this,e,x,w,t.safe_not_equal,["class","href","className","title"])}},e.Route=class extends t.SvelteComponent{constructor(e){super(),t.init(this,e,b,_,t.safe_not_equal,["key","path","props","exact","fallback","component","condition","redirect"])}},e.Router=class extends t.SvelteComponent{constructor(e){super(),t.init(this,e,$,f,t.safe_not_equal,["path","nofallback"])}},e.navigateTo=l,Object.defineProperty(e,"__esModule",{value:!0})});
